<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One-Time Delivery</title>
    <link rel="stylesheet" href="CSS/packages.css">
    <link rel="stylesheet" href="CSS/navbar.css">

    <script type="text/javascript" src="js/location.js"></script>

    <link href="https://fonts.googleapis.com/css2? family=Ubuntu+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <%- include('./navbar'); %>

        <input style="display: none;" type="text" id="latitude">
        <input style="display: none;" type="text" id="longitude">

        <div class="bg-img">
            <div class="form-container2">
                <center><h1 class="l-header h1 ship" style="font-size: 40px; color: white">Get Your Dabba Delivered Today!</h1></center>
                <form>
                    <div class="row">
                        <div class="inline-block right-margin">
                            <div class="label">Receipient Name <span class="info"></span></div>
                            <input type="text" class="input-field" name="recepient-name" id="recepient-name" placeholder="Enter Receipient Name" required/>
                        </div>
    
                        <div class="inline-block responsive">
                            <div class="label">Receipient Phone No. <span class="info"></span></div>
                            <input type="tel" class="input-field" name="phone" id="phone" placeholder="Enter Receipient Phone No." pattern="[0-9]{10}" required/>
                        </div>
                    </div>
    
                    <div class="row">
                        <div class="inline-block right-margin">
                            <div class="label">Pick-Up Address <span class="info"></span></div>
                            <textarea name="pickup" id="pickup" class="input-field" cols="60" rows="6" placeholder="Enter Pick-Up Address" required></textarea>
                        </div>
                        
                        <div class="inline-block responsive">
                            <div class="label">Drop-Off Point <span class="info"></span></div>
                            <textarea name="dropoff" id="dropoff" class="input-field" cols="60" rows="6" placeholder="Enter Drop-Off Address" required></textarea>
                        </div>
                    </div>
    
                    <center>
                        <input type="button" name="submit" id="toggle-button" class="btn" value="Submit" />
                    </center>
                </form>
            </div>
        </div>

        <div id="how-it-works" class="l-section wf-section">
            <div class="l-container">
                <h2 class="l-header h1 ship">How It Works</h2>
                <div class="l-three-grid">
                    <div class="div-block-189">
                        <div class="l-number">1</div>
                        <h3 class="l-header h3">Enter Details</h3>
                        <p class="l-paragraph l-write l-first-step">Enter the details like recepient name and contact
                            number, the pick-up point and the drop-off point.</p>
                    </div>
                    <div class="div-block-189">
                        <div class="l-number">2</div>
                        <h3 class="l-header h3">Select Nearest Dabbawala</h3>
                        <p class="l-paragraph l-write l-first-step">Select a dabbawala from all the nearest dabbawalas
                            available.</p>
                    </div>
                    <div class="div-block-189">
                        <div class="l-number">3</div>
                        <h3 class="l-header h3">Make The Payment</h3>
                        <p class="l-paragraph l-write l-first-step">You will have to complete the payment for the
                            selected
                            delivery package to proceed.</p>
                    </div>
                </div>
            </div>
        </div>

        <center><div class="target" style="background-color: rgb(167, 167, 167, 0.4);">
            <br>
            <h2 class="l-header h1 ship">Nearest Dabbawalas</h2>
            <button id="rzp-button1" class="details_btn"><span>Dabbawala Name <br><br>
                Distance: 256m
            </span></button>
            <br><br><br>
    
            <button id="rzp-button1" class="details_btn"><span>Dabbawala Name <br><br>
                Distance: 256m
            </span></button>
            <br><br><br>
            
            <br>
        </div></center>

        <div id="how-it-works" class="l-section wf-section">
            <div class="l-container">
                <div class="l-two-grid">
                    <div class="div-block-189">
                        <div class="l-number">4</div>
                        <h3 class="l-header h3">One-Time Delivery Confirmed</h3>
                        <p class="l-paragraph l-write l-first-step">Your one-time delivery will be confirmed and the
                            Dabbawala will now deliver your dabba on that particular day.</p>
                    </div>
                    <div class="div-block-189">
                        <div class="l-number">5</div>
                        <h3 class="l-header h3">Access Features</h3>
                        <p class="l-paragraph l-write l-first-step">You can then access various features such as
                            tracking
                            your dabba, notifications, etc.</p>
                    </div>
                </div>
            </div>
        </div><br><br><br><br><br><br>

        <footer id="footer">
            <div class="copyright">
                <p>Â© All rights reserved | My Dabbawala</p>
                <ul class="contact">
                    <li>
                        <a href="#" class="fa fa-twitter"></a>
                    </li>
                    <li>
                        <a href="#" class="fa fa-facebook"></a>
                    </li>
                    <li>
                        <a href="#" class="fa fa-instagram"></a>
                    </li>
                </ul>
            </div>
        </footer>

        <!-- Razor Pay-->
        <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        <script>
        var options = {
            "key": "rzp_test_efrPdinX44khOe", // Enter the Key ID generated from the Dashboard
            "amount": "50000", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
            "currency": "INR",
            "name": "My Dabbawala",
            "description": "Test Transaction",
            "image": "https://example.com/your_logo",
            //"order_id": "order_Ef80WJDPBmAeNt", //Pass the `id` obtained in the previous step
            //"account_id": "acc_Ef7ArAsdU5t0XL",
            "handler": function (response){
                alert(response.razorpay_payment_id);
                //alert(response.razorpay_order_id);
                //alert(response.razorpay_signature)
                window.open('user_dashboard.html',"_self");
            }
        };
        var rzp1 = new Razorpay(options);
        document.getElementById('rzp-button1').onclick = function(e){
            rzp1.open();
            e.preventDefault();
        }

        //hide and show new division
        var rname = document.getElementById("recepient-name");
        var phone = document.getElementById("phone");
        var pickup = document.getElementById("pickup");
        var dropoff = document.getElementById("dropoff");

        document.getElementById('toggle-button').addEventListener('click', function () {
        toggle(document.querySelectorAll('.target'));
        });

        function toggle (elements, specifiedDisplay) {
            var element, index;

            if (rname.value.trim() == "" || phone.value.trim() == "" || pickup.value.trim() == "" || dropoff.value.trim() == "") {
                alert("Error: No field should be empty");
            }
            else
            {
                elements = elements.length ? elements : [elements];
                for (index = 0; index < elements.length; index++) {
                    element = elements[index];

                    if (isElementHidden(element)) {
                    element.style.display = '';

                    // If the element is still hidden after removing the inline display
                    if (isElementHidden(element)) {
                        element.style.display = specifiedDisplay || 'block';
                    }
                    }
                }
                function isElementHidden (element) {
                    return window.getComputedStyle(element, null).getPropertyValue('display') === 'none';
                }
            }
        }
        </script>

</body>
</html>